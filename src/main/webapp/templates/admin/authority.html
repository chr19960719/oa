<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>配置权限</title>
    <link rel="stylesheet" href="http://static.runoob.com/assets/js/jquery-treeview/jquery.treeview.css" />
    <script src="../../indexstatic/js/jquery-3.3.1.js"></script>
	<script src="../../indexstatic/js/plugins/downtree/jquery.treeview.js" type="text/javascript"></script>

    <style>
        span.folder{
            background-image: url("../../indexstatic/assets/img/权限添加.png");
            background-repeat: no-repeat;
            font-size: 14px;
            padding-left: 20px;
            height: 17px;
        }

        /*ul li{
            list-style: none;
        }*/
    </style>

    <script type="text/javascript">

        $(function(){

            $("[name=chkbox]").click(function(){

                //当选中或取消一个权限时，也同时选中或取消所有的下级权限
                $(this).siblings("ul").find("input").prop("checked",this.checked);

                if(($(this).val()=="2"||$(this).val()=="3"||$(this).val()=="10")&&$(this).parent("li").find("input")[0].checked==true){
                	$('#1').prop("checked",true);
                }
           

                //当某一个父权限下的子权限都不选中时，该父权限也不选中
                var elements=$(this).parent("li").parent("ul").find("input");
                var num=elements.length;
                /*alert(num);*/
                var a=0;
                for(var i=0;i<num;i++){
                    if(elements[i].checked==false){
                        a++;
                    }
                }
                if(a==num){
                    $(this).parent("li").parent("ul").siblings("input").prop("checked",false);
                }


            });
        });
    </script>
</head>
<body>

<!-- 标题显示 -->
<div id="Title_bar">
    <div id="Title_bar_Head">
        <div id="Title_Head"></div>
        <div id="Title"><!--页面标题-->
            <label for="chkAll">配置权限</label>           
        </div>
        <div id="Title_End"></div>
    </div>
</div>

<!--显示表单内容-->
<div id=MainArea>


    <ul id="tree">
        <li>
            <input type="checkbox" id="cb0" name="chkbox">
            <label for="cb0"><span class="folder">全选</span></label>
        <ul id="choice">       	
            <li>
                <input type="checkbox"  id="1" name="chkbox" value="1">
                <label for="cb1"><span class="folder">用户管理</span></label>
                <ul>
                    <li><input type="checkbox" id="2" name="chkbox" value="2">
                        <label for="cb11"><span class="folder">普通用户</span></label></li>
                    <li><input type="checkbox" id="3" name="chkbox" value="3">
                        <label for="cb12"><span class="folder">中级用户</span></label></li>   
                    <li><input type="checkbox" id="10" name="chkbox" value="10">
                        <label for="cb12"><span class="folder">添加用户</span></label></li>                     
                </ul>
            </li>
            <li id="4">
                <input type="checkbox" id="4" name="chkbox" value="4">
                <label for="cb2"><span class="folder">部门管理</span></label>                
            </li>
            <li id="5">
                <input type="checkbox" id="5" name="chkbox" value="5">
                <label for="cb3"><span class="folder">职位管理</span></label>               
            </li>
            <li id="6">
                <input type="checkbox" id="6" name="chkbox" value="6">
                <label for="cb4"><span class="folder">通知发送</span></label>            
            </li>
            <li id="7">
                <input type="checkbox" id="7" name="chkbox" value="7">
                <label for="cb5"><span class="folder">我的消息</span></label>            
            </li>
            <li id="8">
                <input type="checkbox" id="8" name="chkbox" value="8">
                <label for="cb6"><span class="folder">我的任务</span></label>            
            </li>
             <li id="9">
                <input type="checkbox" id="9" name="chkbox" value="9">
                <label for="cb7"><span class="folder">权限分配</span></label>            
            </li>
        </ul>
        </li>

    </ul>
	<button onclick="findall();">点击</button>
</div>

<script language="javascript">
    $("#tree").treeview();
    function findall(){
		var elements = $("#choice").find("input");
    	var num=elements.length;
    	var flag=false;
    	for(var i=0;i<num;i++){
            if(elements[i].checked==true){
                flag = true;
                //arrayObj.push(elements[i].id);
                alert(elements[i].id);
            }
        }
    }
</script>

</body>
</html>